---
import type { GetStaticPaths, InferGetStaticPropsType } from 'astro'
import { Image } from 'astro:assets'
import Navigator from '../components/Navigator.astro'
import BaseLayout from '../layouts/BaseLayout.astro'
import { articles } from './article'

export const getStaticPaths = (async () => {
  return (await articles()).map((article) => ({
    params: { article: article.path },
    props: { ...article },
  }))
}) satisfies GetStaticPaths

type Props = InferGetStaticPropsType<typeof getStaticPaths>

const { image, Content, nav } = Astro.props
---

<BaseLayout>
  {image !== undefined && <Image src={image} alt="" />}
  <article
    class="prose prose-h1:font-bold prose-figure:flex prose-figure:flex-col prose-figure:items-center max-w-none p-4 sm:p-6 md:pt-8"
  >
    <Content />
  </article>
  <Navigator nav={nav} />
</BaseLayout>

<script>
  import mediumZoom from 'medium-zoom'

  mediumZoom('img', { background: '#000000bf' })
</script>
